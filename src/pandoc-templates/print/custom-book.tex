\documentclass[10pt]{book}
\usepackage[hidelinks]{hyperref}
\usepackage{pdfpages}
\usepackage{titlesec}
\usepackage{titletoc}
\usepackage{color}
\usepackage{listings}
\usepackage{geometry}
\usepackage{graphicx}
\usepackage{wallpaper}
\usepackage{fancyhdr}
\usepackage[T1]{fontenc}
\usepackage[sfdefault]{roboto}
\usepackage[spanish, es-noindentfirst]{babel}
\usepackage{caption}
\usepackage[bottom]{footmisc}
\usepackage{emptypage}


% Page size
\geometry{paperwidth=17.9cm, paperheight=23.5cm}
\geometry{left=2cm, right=2cm, top=2.5cm, bottom=2.5cm}

% Page style (header and footer)
\pagestyle{fancy}
\fancypagestyle{MyStyle}{
    \fancyhf{}
    \fancyhead[LE]{\footnotesize\color{gray}\rightmark}
    \fancyhead[RO]{\footnotesize\color{gray}\leftmark}
    \renewcommand{\chaptermark}[1]{\markboth{\MakeUppercase{##1}}{}}
    \renewcommand{\sectionmark}[1]{\markright{##1}}
    \fancyfoot[C]{\fontfamily{\sfdefault} \thepage}
}

\renewcommand{\headrulewidth}{0pt}
\renewcommand*{\thepage}{\footnotesize\arabic{page}}

% Paragraph
\renewcommand{\baselinestretch}{1.2} % Separation between lines
\setlength{\parskip}{0.25cm} % Separation between paragraph
\setlength{\parindent}{0pt} % remove paragraph indention

% Remove number of section and subsection from document
\titleformat{\chapter}{\normalfont\Huge\bfseries}{}{0pt}{}
\titleformat{\section}{\normalfont\Large\bfseries}{}{0pt}{}
\titleformat{\subsection}{\normalfont\large\bfseries}{}{0pt}{}

% Table of contents
\titlecontents{chapter}[0em]        % { <chapter|section|subsection|...> } [<left spacing>]
    {\vspace{0em}}                  % { <space between above-code> }
    {\normalfont\bfseries}          % { <numbered-entry-format }
    {}                              % { <numberless-entry-format> }
    {\enspace\dotfill\contentspage} % { <filler-page-format> }

\titlecontents{section}[2em]
    {\vspace{-0.5em}}
    {\normalfont\sffamily\relax}
    {}
    {\enspace\small\dotfill\contentspage}

\titlecontents{subsection}[4em]
    {\vspace{-0.7em}}
    {}
    {}
    {\enspace\small\dotfill\contentspage}
\renewcommand{\familydefault}{\sfdefault}

% Dots style
\usepackage{tocloft}
\renewcommand\cftdotsep{5}
\setlength{\cftsecindent}{-8pt} % Indent for \section
\setlength{\cftsubsecindent}{4pt} % Indent for \subsection

% Remove table of content numeration
\makeatletter
\renewcommand{\cftchappresnum}{\begin{lrbox}{\@tempboxa}}
\renewcommand{\cftchapaftersnum}{\end{lrbox}}
\makeatother
\makeatletter
\renewcommand{\cftsecpresnum}{\begin{lrbox}{\@tempboxa}}
\renewcommand{\cftsecaftersnum}{\end{lrbox}}
\makeatother
\makeatletter
\renewcommand{\cftsubsecpresnum}{\begin{lrbox}{\@tempboxa}}
\renewcommand{\cftsubsecaftersnum}{\end{lrbox}}
\makeatother

% code to insert to fix environment Shaded undefined issue with
% showing code chunks in article IEEE template.
$if(highlighting-macros)$
$highlighting-macros$
$endif$

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% Images
$if(graphics)$
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
$endif$

% Listings (code blocks)
$if(listings)$
% general listing colors
\definecolor{listing-background}{HTML}{F5F5F5}
\definecolor{listing-rule}{HTML}{B3B2B3}
\definecolor{listing-language}{HTML}{8F8E8F}
\definecolor{listing-comment}{HTML}{989898}
\definecolor{listing-text-color}{HTML}{3a3a3a}
\definecolor{listing-text-color-black}{HTML}{000000}

\lstdefinestyle{leanmind_listing_style}{
    title            = ,
    numbers          = none,
    language         = java,
    xleftmargin      = 0.6em,
    framexleftmargin = 0.4em,
    basicstyle       = \color{listing-text-color}\linespread{1.0}$if(code-block-font-size)$$code-block-font-size$$else$\footnotesize$endif$\ttfamily{},
    breaklines       = true,
    frame            = lines,
    rulecolor        = \color{listing-rule},
    framesep         = 0.19em,
    frameround       = ffff,
    tabsize          = 4,
    numberstyle      = \color{listing-comment},
    aboveskip        = 1.0em,
    belowskip        = 0.1em,
    abovecaptionskip = 0em,
    belowcaptionskip = 0.4em, % Gap between title and code
    linewidth        = 37em,
    keywordstyle     = {\color{listing-text-color-black}\bfseries},
    keywordstyle     = {[2]\color{listing-text-color-black}\bfseries},
    keywordstyle     = {[3]\color{listing-text-color-black}\bfseries\itshape},
    sensitive        = true,
    commentstyle     = \color{listing-comment},
    showstringspaces = false,
    identifierstyle  = \color{listing-text-color-black},
    showstringspaces = false,
    stepnumber       = 1,
    numbersep        = 5pt,
    extendedchars    = true,
    captionpos       = t,
    showspaces       = false,
    showtabs         = false,
    framexrightmargin = 17pt,
    framexbottommargin = 5pt,
    framextopmargin  = 5pt,
    escapeinside     = {/*@}{@*/}, % Allow LaTeX inside these special comments
    literate         =
        {á}{{\'a}}1 {é}{{\'e}}1 {í}{{\'i}}1 {ó}{{\'o}}1 {ú}{{\'u}}1
        {Á}{{\'A}}1 {É}{{\'E}}1 {Í}{{\'I}}1 {Ó}{{\'O}}1 {Ú}{{\'U}}1
        {€}{{\EUR}}1 {£}{{\pounds}}1 {«}{{\guillemotleft}}1
        {»}{{\guillemotright}}1 {ñ}{{\~n}}1 {Ñ}{{\~N}}1 {¿}{{?`}}1
        {…}{{\ldots}}1 {≥}{{>=}}1 {≤}{{<=}}1 {„}{{\glqq}}1 {“}{{\grqq}}1
        {”}{{''}}1
}

% Java (Java SE 12, 2019-06-22)
\lstdefinelanguage{Java}{
    morekeywords={
        % normal keywords (without data types)
        abstract,assert,break,case,catch,class,continue,default,
        do,else,enum,exports,extends,final,finally,for,fun, function,if,implements,
        import,instanceof,interface,module,native,new,package,private,
        protected,public,requires,return,static,strictfp,super,switch,
        synchronized,this,throw,throws,transient,try,volatile,while,
        % identifiers
        var,let,val,
    },
    morekeywords={[2] % data types
    % primitive data types
    boolean,byte,char,double,float,int,long,short,
    % String
    String,
    % primitive wrapper types
    Array,Boolean,Byte,Character,Double,Float,Function,Integer,Long,Short,
    % number types
    Number,AtomicInteger,AtomicLong,BigDecimal,BigInteger,DoubleAccumulator,DoubleAdder,LongAccumulator,LongAdder,Short,
    % other
    Object,Void,void
    },
    morekeywords={[3] % literals
    % reserved words for literal values
    null,true,false,
    },
    sensitive,
    morecomment  = [l]//,
    morecomment  = [s]{/*}{*/},
    morecomment  = [s]{/**}{*/},
    morestring   = [b]",
    morestring   = [b]',
}
\lstset{style=leanmind_listing_style}

\DeclareCaptionFormat{listing}{{\textwidth+17pt\relax}\vskip1pt#1#2#3}
\captionsetup[lstlisting]{
    format=listing,
    singlelinecheck=false,
    labelformat={empty},
    margin=0pt,
    font={tt, it, scriptsize, color=listing-language},
    labelsep=space,
    labelfont=bf,
    justification=raggedleft
}

$endif$

\begin{document}
    \setcounter{page}{5}
    \raggedbottom
    \pagestyle{MyStyle}
    \tableofcontents
    \newpage\phantom{blabla}\thispagestyle{empty}
    \begin{sloppypar} % Escape overflowed long words
    $body$
    \end{sloppypar}
    \newpage\phantom{blabla}\thispagestyle{empty}
    \newpage\phantom{blabla}\thispagestyle{empty}
    \newpage\phantom{blabla}\thispagestyle{empty}
\end{document}
